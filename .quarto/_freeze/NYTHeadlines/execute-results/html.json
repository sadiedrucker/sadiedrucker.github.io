{
  "hash": "e3946746f855f15cbbdda91a44f89ac4",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"New York Times Headlines\"\nformat: \n  html:\n    code-fold: true\n    \nexecute:\n  message: false\n  warning: false\n  echo: true\n---\n\n\n\n\nThis project analyzes emotional tone in New York Times article headlines using regular expressions (regex). To analyze the emotional tone of New York Times headlines, I defined negative and positive word lists using keywords that commonly indicate negative events or risks (e.g., *crisis, warning, fall, decline, collapse, turmoil*) and positive developments (e.g., *success, rise, growth, progress, recovery*). Regular expressions were used to detect these words in headlines, including variations such as plurals or related word forms, allowing me to categorize headlines as containing positive or negative emotional signals and analyze how these patterns vary over time.\n\nThe data come from the `NYTimes` dataset in the RTextTools package, which contains New York Times headlines, publication dates, and metadata.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(stringr)\nlibrary(lubridate)\nlibrary(RTextTools) \nlibrary(forcats)\n\n\ndata(NYTimes)\nnyt <- as_tibble(NYTimes)\n\nnyt<-nyt |>\n  mutate(Date=as.Date(Date, format = \"%d-%b-%y\"))\n\nnyt_clean <- nyt |>\n  mutate(\n    clean_headline = Title |>\n    str_to_lower() |>\n    str_replace_all(\"[^a-z\\\\s]\", \" \") |> # REGEX 1: remove non-letters\n    str_squish(),\n    year = year(Date),\n    month = floor_date(Date, \"month\")\n)\n\nnegative_pattern <- \"\\\\b(crisis|warning\\\\w*|fall\\\\w*|decline|collapse|turmoil)\\\\b\" #REGEX 2: negative statement list\npositive_pattern <- \"\\\\b(success|rise|growth|progress|improve|recovery|gain)\\\\b\" #REGEX3: positive statement list\nrise_pattern <- \"(?<!sun)rise\" #LOOKAROUND: ensures it only picks up rise when it is not associated with sunrise\n\n\nnyt_sentiment <- nyt_clean |>\nmutate(\nnegative = str_detect(clean_headline, negative_pattern),\npositive = str_detect(clean_headline, positive_pattern) | str_detect(clean_headline, rise_pattern)\n)\n\nsentiment_year <- nyt_sentiment |>\ngroup_by(year) |>\nsummarise(\npositive = sum(positive),\nnegative = sum(negative)\n)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nsentiment_year_long <- sentiment_year |>\npivot_longer(cols = c(positive, negative),\nnames_to = \"sentiment\", values_to = \"count\")\n\nggplot(sentiment_year_long, aes(x = year, y = count, color = sentiment)) +\n  geom_line(size = 1.2) +\n  geom_point(size = 2) +\n  scale_color_manual(values = c(\"positive\" = \"#72B01D\", \"negative\" = \"#7C0B2B\")) +\n  labs(\n    title = \"Yearly Emotional Tone in NYT Headlines\",\n    x = \"Year\",\n    y = \"Headline Count\",\n    color = \"Sentiment\", \n    caption= \"This line plot shows total yearly counts of positive and negative NYT headlines.\"\n   \n    ) +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](NYTHeadlines_files/figure-html/unnamed-chunk-2-1.png){fig-alt='This line plot shows total yearly counts of positive and negative NYT headlines. It highlights general trends in sentiment over time, with negative sentiment usually dominating.' width=672}\n:::\n:::\n\n\n\n\nThis graph provides a broader trend across years, noting that negative headlines typically outnumber positive ones.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsentiment_month <- nyt_sentiment |>\n  pivot_longer(\n    cols = c(positive, negative),\n    names_to = \"sentiment\",\n    values_to = \"value\"\n  ) |>\n  filter(value == TRUE) |>\n  group_by(month, sentiment) |>\n  summarise(count = n())\n\n# Filter to years 2001-2003\nsentiment_month_filtered <- sentiment_month |>\n  filter(month >= as.Date(\"2001-01-01\") & month <= as.Date(\"2002-12-31\")) |>\n  group_by(month) |>\n  mutate(total = sum(count),\n         proportion = count / total)\n\n\nggplot(sentiment_month_filtered,\n       aes(x = month, y = proportion, fill = sentiment)) +\n  geom_col() +\n  scale_fill_manual(values = c(\"positive\" = \"#72B01D\", \"negative\" = \"#7C0B2B\")) +\n  labs(\n    title = \"Monthly Proportion of Positive vs Negative Headlines (2001â€“2003)\",\n    x = \"Month\",\n    y = \"Proportion\",\n    fill = \"Sentiment\", \n    caption = \"Proportion of positive and negative NYT headlines by month from 2001 to 2003.\"\n  ) +\n  scale_x_date(date_labels = \"%b %Y\", date_breaks = \"2 months\") +  \n  theme_minimal() +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1))\n```\n\n::: {.cell-output-display}\n![](NYTHeadlines_files/figure-html/unnamed-chunk-3-1.png){fig-alt='This plot shows the proportion of positive and negative NYT headlines by month from 2001 to 2002 Notice the spike in negative sentiment after September 2001, likely reflecting coverage of the 9/11 attacks.' width=672}\n:::\n:::\n\n\n\n\nThis plot shows the proportion of positive and negative NYT headlines by month from 2001 to 2003. Notice the spike in negative sentiment after September 2001, likely reflecting coverage of the 9/11 attacks.\n\n### Sources\n\nJurka, T. P., Collingwood, L., Boydstun, A. E., Grossman, E., & van Atteveldt, W. (2020). *RTextTools: Automatic text classification via supervised learning* (R package version 1.4.3) \\[Data set and software\\]. <http://www.rtexttools.com/>\n",
    "supporting": [
      "NYTHeadlines_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}